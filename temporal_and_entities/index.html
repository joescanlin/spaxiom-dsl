
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="An embedded domain-specific language for spatial sensor fusion, temporal reasoning, and real-time event detection">
      
      
        <meta name="author" content="Joe Scanlin">
      
      
      
        <link rel="prev" href="../api/overview/">
      
      
        <link rel="next" href="../cli_usage/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Temporal - Spaxiom DSL</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#temporal-and-entity-operations-in-spaxiom" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Spaxiom DSL" class="md-header__button md-logo" aria-label="Spaxiom DSL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Spaxiom DSL
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Temporal
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/joescanlin/spaxiom-dsl" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Spaxiom DSL" class="md-nav__button md-logo" aria-label="Spaxiom DSL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Spaxiom DSL
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/joescanlin/spaxiom-dsl" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../whats_new/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What's New in 0.1.0
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick-Start
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Temporal
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Temporal
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#temporal-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Temporal Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Temporal Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Syntax
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-temporal-condition" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Temporal Condition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-with-event-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      Using with Event Handlers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entity-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Entity Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Entity Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-syntax_1" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Syntax
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters_1" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_1" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-existence-check" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Existence Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtering-with-predicates" class="md-nav__link">
    <span class="md-ellipsis">
      Filtering with Predicates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combining-with-events" class="md-nav__link">
    <span class="md-ellipsis">
      Combining with Events
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combining-temporal-and-entity-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Combining Temporal and Entity Operations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#privacy-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Privacy Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Privacy Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#privacy-levels" class="md-nav__link">
    <span class="md-ellipsis">
      Privacy Levels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-syntax_2" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Syntax
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_2" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-sensors-with-privacy-levels" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Sensors with Privacy Levels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#privacy-inheritance-in-fusion-sensors" class="md-nav__link">
    <span class="md-ellipsis">
      Privacy Inheritance in Fusion Sensors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime-handling-of-private-sensors" class="md-nav__link">
    <span class="md-ellipsis">
      Runtime Handling of Private Sensors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sensorregistry-privacy-methods" class="md-nav__link">
    <span class="md-ellipsis">
      SensorRegistry Privacy Methods
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-world-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Real-World Use Case
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real-World Use Case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#privacy-aware-real-world-example" class="md-nav__link">
    <span class="md-ellipsis">
      Privacy-Aware Real-World Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli_usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/smart_building/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Smart Building
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="temporal-and-entity-operations-in-spaxiom">Temporal and Entity Operations in Spaxiom<a class="headerlink" href="#temporal-and-entity-operations-in-spaxiom" title="Permanent link">&para;</a></h1>
<p>This document explains how to use the temporal (<code>within()</code>), entity (<code>exists()</code>), and privacy operations in Spaxiom DSL.</p>
<h2 id="temporal-operations">Temporal Operations<a class="headerlink" href="#temporal-operations" title="Permanent link">&para;</a></h2>
<p>The <code>within()</code> function allows you to create conditions that must be true continuously for a specified duration before evaluating to true.</p>
<h3 id="basic-syntax">Basic Syntax<a class="headerlink" href="#basic-syntax" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">within</span><span class="p">(</span><span class="n">duration_seconds</span><span class="p">,</span> <span class="n">condition</span><span class="p">)</span>
</code></pre></div>
<h3 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h3>
<ul>
<li><code>duration_seconds</code>: The duration in seconds for which the condition must be continuously true</li>
<li><code>condition</code>: The base condition to evaluate over time</li>
</ul>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h3>
<h4 id="simple-temporal-condition">Simple Temporal Condition<a class="headerlink" href="#simple-temporal-condition" title="Permanent link">&para;</a></h4>
<p>Check if a sensor value has been above a threshold for at least 3 seconds:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">Condition</span><span class="p">,</span> <span class="n">within</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom.sensor</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sensor</span>

<span class="c1"># Create a sensor</span>
<span class="n">temp_sensor</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">(</span><span class="s2">&quot;temp1&quot;</span><span class="p">,</span> <span class="s2">&quot;temperature&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="c1"># Define a basic condition</span>
<span class="n">high_temp</span> <span class="o">=</span> <span class="n">Condition</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">temp_sensor</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">30.0</span><span class="p">)</span>

<span class="c1"># Create a temporal condition</span>
<span class="n">high_temp_sustained</span> <span class="o">=</span> <span class="n">within</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">high_temp</span><span class="p">)</span>

<span class="c1"># This will only evaluate to true if temp_sensor.read() has been</span>
<span class="c1"># continuously &gt; 30.0 for at least 3 seconds</span>
<span class="k">if</span> <span class="n">high_temp_sustained</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Temperature has been high for at least 3 seconds!&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="using-with-event-handlers">Using with Event Handlers<a class="headerlink" href="#using-with-event-handlers" title="Permanent link">&para;</a></h4>
<p>Register a callback that only fires after a condition has been true for 5 seconds:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">Condition</span><span class="p">,</span> <span class="n">within</span><span class="p">,</span> <span class="n">on</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom.sensor</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sensor</span>

<span class="n">motion_sensor</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">(</span><span class="s2">&quot;motion1&quot;</span><span class="p">,</span> <span class="s2">&quot;motion&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="c1"># Basic condition: motion detected</span>
<span class="n">motion_detected</span> <span class="o">=</span> <span class="n">Condition</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">motion_sensor</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Temporal condition: motion sustained for 5 seconds</span>
<span class="n">sustained_motion</span> <span class="o">=</span> <span class="n">within</span><span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">motion_detected</span><span class="p">)</span>

<span class="c1"># This callback will only fire after 5 seconds of continuous motion</span>
<span class="nd">@on</span><span class="p">(</span><span class="n">sustained_motion</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">handle_sustained_motion</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sustained motion detected for 5 seconds!&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="entity-operations">Entity Operations<a class="headerlink" href="#entity-operations" title="Permanent link">&para;</a></h2>
<p>The <code>exists()</code> function allows you to check if any entities in an <code>EntitySet</code> satisfy a given predicate.</p>
<h3 id="basic-syntax_1">Basic Syntax<a class="headerlink" href="#basic-syntax_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">exists</span><span class="p">(</span><span class="n">entity_set</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>
<h3 id="parameters_1">Parameters<a class="headerlink" href="#parameters_1" title="Permanent link">&para;</a></h3>
<ul>
<li><code>entity_set</code>: The <code>EntitySet</code> to check</li>
<li><code>predicate</code> (optional): A function that takes an entity and returns a boolean. If not provided, the function checks if the entity set has any entities.</li>
</ul>
<h3 id="examples_1">Examples<a class="headerlink" href="#examples_1" title="Permanent link">&para;</a></h3>
<h4 id="simple-existence-check">Simple Existence Check<a class="headerlink" href="#simple-existence-check" title="Permanent link">&para;</a></h4>
<p>Check if there are any entities in a set:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">EntitySet</span><span class="p">,</span> <span class="n">Entity</span><span class="p">,</span> <span class="n">exists</span><span class="p">,</span> <span class="n">Condition</span>

<span class="c1"># Create an entity set</span>
<span class="n">persons</span> <span class="o">=</span> <span class="n">EntitySet</span><span class="p">(</span><span class="s2">&quot;Persons&quot;</span><span class="p">)</span>

<span class="c1"># Check if any persons exist</span>
<span class="n">persons_exist</span> <span class="o">=</span> <span class="n">exists</span><span class="p">(</span><span class="n">persons</span><span class="p">)</span>

<span class="c1"># Use in a condition</span>
<span class="k">if</span> <span class="n">persons_exist</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;At least one person exists in the set&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="filtering-with-predicates">Filtering with Predicates<a class="headerlink" href="#filtering-with-predicates" title="Permanent link">&para;</a></h4>
<p>Check if there are any entities matching a specific criterion:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">EntitySet</span><span class="p">,</span> <span class="n">Entity</span><span class="p">,</span> <span class="n">exists</span><span class="p">,</span> <span class="n">Condition</span>

<span class="c1"># Create an entity set</span>
<span class="n">sensors</span> <span class="o">=</span> <span class="n">EntitySet</span><span class="p">(</span><span class="s2">&quot;Sensors&quot;</span><span class="p">)</span>

<span class="c1"># Add some entities with attributes</span>
<span class="n">sensors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">}))</span>
<span class="n">sensors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;humidity&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">60.0</span><span class="p">}))</span>
<span class="n">sensors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Entity</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;motion&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}))</span>

<span class="c1"># Check if any temperature sensors exceed a threshold</span>
<span class="n">high_temp_exists</span> <span class="o">=</span> <span class="n">exists</span><span class="p">(</span><span class="n">sensors</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;temperature&quot;</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">30.0</span><span class="p">)</span>

<span class="c1"># Use in a condition</span>
<span class="k">if</span> <span class="n">high_temp_exists</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;At least one temperature sensor is reading high!&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="combining-with-events">Combining with Events<a class="headerlink" href="#combining-with-events" title="Permanent link">&para;</a></h4>
<p>Using exists() with event handlers:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">EntitySet</span><span class="p">,</span> <span class="n">Entity</span><span class="p">,</span> <span class="n">exists</span><span class="p">,</span> <span class="n">on</span><span class="p">,</span> <span class="n">Condition</span>

<span class="c1"># Create an entity set for detected persons</span>
<span class="n">persons</span> <span class="o">=</span> <span class="n">EntitySet</span><span class="p">(</span><span class="s2">&quot;Persons&quot;</span><span class="p">)</span>

<span class="c1"># Create a condition using exists()</span>
<span class="n">person_detected</span> <span class="o">=</span> <span class="n">exists</span><span class="p">(</span><span class="n">persons</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;confidence&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># Register an event handler</span>
<span class="nd">@on</span><span class="p">(</span><span class="n">person_detected</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">alert_person_detected</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A person with high confidence was detected!&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="combining-temporal-and-entity-operations">Combining Temporal and Entity Operations<a class="headerlink" href="#combining-temporal-and-entity-operations" title="Permanent link">&para;</a></h2>
<p>You can combine both operations for powerful temporal-entity checking:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">EntitySet</span><span class="p">,</span> <span class="n">Entity</span><span class="p">,</span> <span class="n">exists</span><span class="p">,</span> <span class="n">within</span><span class="p">,</span> <span class="n">on</span><span class="p">,</span> <span class="n">Condition</span>

<span class="c1"># Create an entity set</span>
<span class="n">vehicles</span> <span class="o">=</span> <span class="n">EntitySet</span><span class="p">(</span><span class="s2">&quot;Vehicles&quot;</span><span class="p">)</span>

<span class="c1"># Check if any vehicles exist</span>
<span class="n">vehicle_exists</span> <span class="o">=</span> <span class="n">exists</span><span class="p">(</span><span class="n">vehicles</span><span class="p">)</span>

<span class="c1"># Check if a vehicle has been continuously present for 10 seconds</span>
<span class="n">vehicle_stopped</span> <span class="o">=</span> <span class="n">within</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">vehicle_exists</span><span class="p">)</span>

<span class="c1"># Register an event handler</span>
<span class="nd">@on</span><span class="p">(</span><span class="n">vehicle_stopped</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">alert_stopped_vehicle</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A vehicle has been stopped for 10 seconds&quot;</span><span class="p">)</span>
</code></pre></div>
<p>This will only trigger the alert when a vehicle has been continuously present for 10 seconds.</p>
<h2 id="privacy-operations">Privacy Operations<a class="headerlink" href="#privacy-operations" title="Permanent link">&para;</a></h2>
<p>Spaxiom supports privacy tags for sensors, allowing you to control how sensitive data is handled in your applications.</p>
<h3 id="privacy-levels">Privacy Levels<a class="headerlink" href="#privacy-levels" title="Permanent link">&para;</a></h3>
<p>Sensors can be tagged with one of two privacy levels:
- <code>"public"</code>: Default level, sensor values are displayed normally
- <code>"private"</code>: Sensitive data, values are redacted in logs and outputs</p>
<h3 id="basic-syntax_2">Basic Syntax<a class="headerlink" href="#basic-syntax_2" title="Permanent link">&para;</a></h3>
<p>When creating a sensor, you can specify its privacy level:</p>
<div class="highlight"><pre><span></span><code><span class="n">Sensor</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">sensor_type</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">privacy</span><span class="o">=</span><span class="s2">&quot;public&quot;</span><span class="o">|</span><span class="s2">&quot;private&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="examples_2">Examples<a class="headerlink" href="#examples_2" title="Permanent link">&para;</a></h3>
<h4 id="creating-sensors-with-privacy-levels">Creating Sensors with Privacy Levels<a class="headerlink" href="#creating-sensors-with-privacy-levels" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sensor</span>

<span class="c1"># Public sensor (default)</span>
<span class="n">public_sensor</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">(</span><span class="s2">&quot;living_room_temp&quot;</span><span class="p">,</span> <span class="s2">&quot;temperature&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="c1"># Private sensor (explicitly set)</span>
<span class="n">private_sensor</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">(</span><span class="s2">&quot;bedroom_occupancy&quot;</span><span class="p">,</span> <span class="s2">&quot;presence&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">privacy</span><span class="o">=</span><span class="s2">&quot;private&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="privacy-inheritance-in-fusion-sensors">Privacy Inheritance in Fusion Sensors<a class="headerlink" href="#privacy-inheritance-in-fusion-sensors" title="Permanent link">&para;</a></h4>
<p>Privacy settings are automatically inherited in fusion sensors. If any component sensor is private, the fusion result is also treated as private:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sensor</span><span class="p">,</span> <span class="n">RandomSensor</span>

<span class="c1"># Create sensors with different privacy settings</span>
<span class="n">public_sensor</span> <span class="o">=</span> <span class="n">RandomSensor</span><span class="p">(</span><span class="s2">&quot;public_temperature&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">private_sensor</span> <span class="o">=</span> <span class="n">RandomSensor</span><span class="p">(</span><span class="s2">&quot;private_humidity&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">privacy</span><span class="o">=</span><span class="s2">&quot;private&quot;</span><span class="p">)</span>

<span class="c1"># Public + Public = Public</span>
<span class="n">public_fusion</span> <span class="o">=</span> <span class="n">public_sensor</span><span class="o">.</span><span class="n">fuse_with</span><span class="p">(</span>
    <span class="n">public_sensor</span><span class="p">,</span>
    <span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;average&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;public_fusion&quot;</span>
<span class="p">)</span>

<span class="c1"># Public + Private = Private (automatically)</span>
<span class="n">mixed_fusion</span> <span class="o">=</span> <span class="n">public_sensor</span><span class="o">.</span><span class="n">fuse_with</span><span class="p">(</span>
    <span class="n">private_sensor</span><span class="p">,</span>
    <span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;average&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mixed_fusion&quot;</span>
<span class="p">)</span>

<span class="c1"># Check privacy levels</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Public fusion privacy: </span><span class="si">{</span><span class="n">public_fusion</span><span class="o">.</span><span class="n">privacy</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># &quot;public&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mixed fusion privacy: </span><span class="si">{</span><span class="n">mixed_fusion</span><span class="o">.</span><span class="n">privacy</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>    <span class="c1"># &quot;private&quot;</span>
</code></pre></div>
<h4 id="runtime-handling-of-private-sensors">Runtime Handling of Private Sensors<a class="headerlink" href="#runtime-handling-of-private-sensors" title="Permanent link">&para;</a></h4>
<p>The runtime automatically redacts values from private sensors in logs and console output:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomSensor</span><span class="p">,</span> <span class="n">SensorRegistry</span><span class="p">,</span> <span class="n">Condition</span><span class="p">,</span> <span class="n">on</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom.runtime</span><span class="w"> </span><span class="kn">import</span> <span class="n">format_sensor_value</span>

<span class="c1"># Create sensors with different privacy levels</span>
<span class="n">public_sensor</span> <span class="o">=</span> <span class="n">RandomSensor</span><span class="p">(</span><span class="s2">&quot;living_room_temp&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">private_sensor</span> <span class="o">=</span> <span class="n">RandomSensor</span><span class="p">(</span><span class="s2">&quot;bedroom_motion&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">privacy</span><span class="o">=</span><span class="s2">&quot;private&quot;</span><span class="p">)</span>

<span class="c1"># Using the format_sensor_value function respects privacy</span>
<span class="n">public_value</span> <span class="o">=</span> <span class="n">public_sensor</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">private_value</span> <span class="o">=</span> <span class="n">private_sensor</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Public sensor value: </span><span class="si">{</span><span class="n">format_sensor_value</span><span class="p">(</span><span class="n">public_sensor</span><span class="p">,</span><span class="w"> </span><span class="n">public_value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>   <span class="c1"># Shows actual value</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Private sensor value: </span><span class="si">{</span><span class="n">format_sensor_value</span><span class="p">(</span><span class="n">private_sensor</span><span class="p">,</span><span class="w"> </span><span class="n">private_value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># Shows &quot;***&quot;</span>

<span class="c1"># When using the runtime, private values are automatically redacted</span>
<span class="c1"># and a warning is logged once per run per private sensor</span>
</code></pre></div>
<h4 id="sensorregistry-privacy-methods">SensorRegistry Privacy Methods<a class="headerlink" href="#sensorregistry-privacy-methods" title="Permanent link">&para;</a></h4>
<p>You can use <code>SensorRegistry</code> to get sensors based on their privacy level:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">SensorRegistry</span>

<span class="c1"># Get all sensors</span>
<span class="n">registry</span> <span class="o">=</span> <span class="n">SensorRegistry</span><span class="p">()</span>
<span class="n">all_sensors</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">list_all</span><span class="p">()</span>

<span class="c1"># Get only public sensors</span>
<span class="n">public_sensors</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">list_public</span><span class="p">()</span>

<span class="c1"># Get only private sensors</span>
<span class="n">private_sensors</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">list_private</span><span class="p">()</span>
</code></pre></div>
<h2 id="real-world-use-case">Real-World Use Case<a class="headerlink" href="#real-world-use-case" title="Permanent link">&para;</a></h2>
<p>Here's a more complex example combining multiple conditions:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">EntitySet</span><span class="p">,</span> <span class="n">Entity</span><span class="p">,</span> <span class="n">Zone</span><span class="p">,</span> <span class="n">exists</span><span class="p">,</span> <span class="n">within</span><span class="p">,</span> <span class="n">on</span><span class="p">,</span> <span class="n">Condition</span>

<span class="c1"># Create zones and entity sets</span>
<span class="n">restricted_zone</span> <span class="o">=</span> <span class="n">Zone</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">persons</span> <span class="o">=</span> <span class="n">EntitySet</span><span class="p">(</span><span class="s2">&quot;Persons&quot;</span><span class="p">)</span>
<span class="n">vehicles</span> <span class="o">=</span> <span class="n">EntitySet</span><span class="p">(</span><span class="s2">&quot;Vehicles&quot;</span><span class="p">)</span>

<span class="c1"># Define conditions</span>
<span class="n">person_in_zone</span> <span class="o">=</span> <span class="n">exists</span><span class="p">(</span><span class="n">persons</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">restricted_zone</span><span class="o">.</span><span class="n">contains</span><span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">p</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))))</span>
<span class="n">vehicle_in_zone</span> <span class="o">=</span> <span class="n">exists</span><span class="p">(</span><span class="n">vehicles</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">restricted_zone</span><span class="o">.</span><span class="n">contains</span><span class="p">((</span><span class="n">v</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">v</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))))</span>

<span class="c1"># Create a combined condition</span>
<span class="n">intrusion</span> <span class="o">=</span> <span class="n">person_in_zone</span> <span class="o">&amp;</span> <span class="n">vehicle_in_zone</span>

<span class="c1"># Create a temporal condition</span>
<span class="n">sustained_intrusion</span> <span class="o">=</span> <span class="n">within</span><span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="n">intrusion</span><span class="p">)</span>

<span class="c1"># Register an event handler</span>
<span class="nd">@on</span><span class="p">(</span><span class="n">sustained_intrusion</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">security_alert</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ALERT: Person and vehicle in restricted zone for 30 seconds!&quot;</span><span class="p">)</span>
</code></pre></div>
<p>This example demonstrates a security system that alerts when both a person and a vehicle have been detected in a restricted zone for at least 30 seconds. </p>
<h3 id="privacy-aware-real-world-example">Privacy-Aware Real-World Example<a class="headerlink" href="#privacy-aware-real-world-example" title="Permanent link">&para;</a></h3>
<p>Here's an example of a smart home system that respects privacy:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sensor</span><span class="p">,</span> <span class="n">Zone</span><span class="p">,</span> <span class="n">Condition</span><span class="p">,</span> <span class="n">on</span><span class="p">,</span> <span class="n">within</span><span class="p">,</span> <span class="n">SensorRegistry</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom.runtime</span><span class="w"> </span><span class="kn">import</span> <span class="n">format_sensor_value</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="c1"># Configure logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="c1"># Create zones for different areas</span>
<span class="n">living_room</span> <span class="o">=</span> <span class="n">Zone</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">bedroom</span> <span class="o">=</span> <span class="n">Zone</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">bathroom</span> <span class="o">=</span> <span class="n">Zone</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="c1"># Create sensors with appropriate privacy levels</span>
<span class="n">living_room_temp</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">(</span><span class="s2">&quot;living_temp&quot;</span><span class="p">,</span> <span class="s2">&quot;temperature&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>  <span class="c1"># public by default</span>
<span class="n">bedroom_motion</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">(</span><span class="s2">&quot;bedroom_motion&quot;</span><span class="p">,</span> <span class="s2">&quot;motion&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">privacy</span><span class="o">=</span><span class="s2">&quot;private&quot;</span><span class="p">)</span>
<span class="n">bathroom_presence</span> <span class="o">=</span> <span class="n">Sensor</span><span class="p">(</span><span class="s2">&quot;bathroom_presence&quot;</span><span class="p">,</span> <span class="s2">&quot;presence&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">privacy</span><span class="o">=</span><span class="s2">&quot;private&quot;</span><span class="p">)</span>

<span class="c1"># Define conditions</span>
<span class="n">high_temp</span> <span class="o">=</span> <span class="n">Condition</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">living_room_temp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">25.0</span><span class="p">)</span>
<span class="n">bedroom_movement</span> <span class="o">=</span> <span class="n">Condition</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">bedroom_motion</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">bathroom_occupied</span> <span class="o">=</span> <span class="n">Condition</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">bathroom_presence</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Create temporal conditions</span>
<span class="n">sustained_high_temp</span> <span class="o">=</span> <span class="n">within</span><span class="p">(</span><span class="mf">60.0</span><span class="p">,</span> <span class="n">high_temp</span><span class="p">)</span>
<span class="n">sustained_bedroom_motion</span> <span class="o">=</span> <span class="n">within</span><span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">bedroom_movement</span><span class="p">)</span>
<span class="n">sustained_bathroom_presence</span> <span class="o">=</span> <span class="n">within</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">bathroom_occupied</span><span class="p">)</span>

<span class="c1"># Register event handlers</span>
<span class="nd">@on</span><span class="p">(</span><span class="n">sustained_high_temp</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">adjust_temperature</span><span class="p">():</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">living_room_temp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="c1"># Public sensor, so we can log the actual value</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Adjusting temperature - current value: </span><span class="si">{</span><span class="n">temp</span><span class="si">}</span><span class="s2">C&quot;</span><span class="p">)</span>
    <span class="c1"># Set up temperature adjustment...</span>

<span class="nd">@on</span><span class="p">(</span><span class="n">sustained_bedroom_motion</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">bedroom_occupied</span><span class="p">():</span>
    <span class="c1"># Private sensor, so we respect privacy in our logs</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">bedroom_motion</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">formatted</span> <span class="o">=</span> <span class="n">format_sensor_value</span><span class="p">(</span><span class="n">bedroom_motion</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bedroom motion detected: </span><span class="si">{</span><span class="n">formatted</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Adjust bedroom settings...</span>

<span class="nd">@on</span><span class="p">(</span><span class="n">sustained_bathroom_presence</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">bathroom_occupied</span><span class="p">():</span>
    <span class="c1"># Private sensor, so we respect privacy in our logs</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">bathroom_presence</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">formatted</span> <span class="o">=</span> <span class="n">format_sensor_value</span><span class="p">(</span><span class="n">bathroom_presence</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bathroom presence detected: </span><span class="si">{</span><span class="n">formatted</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Turn on fan and lights...</span>

<span class="c1"># Start the runtime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spaxiom.runtime</span><span class="w"> </span><span class="kn">import</span> <span class="n">start_blocking</span>
<span class="n">start_blocking</span><span class="p">()</span>
</code></pre></div>
<p>This example showcases a privacy-aware smart home system where:
1. Public environmental sensors (like temperature) show their actual values
2. Private occupancy sensors (in bedrooms and bathrooms) have their values redacted in logs
3. The system still functions correctly with all sensors, but respects privacy in its outputs </p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/joescanlin/spaxiom-dsl" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.sections", "navigation.expand", "toc.integrate"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>